sudo: false

language: python

python:
    - "2.7"

# Cache the pip directory. "cache: pip" doesn't work due to install override. See https://github.com/travis-ci/travis-ci/issues/3239.
cache:
  - directories:
    - $HOME/.cache/pip

before_install:
  - curl -O https://download.elasticsearch.org/elasticsearch/elasticsearch/elasticsearch-0.90.13.zip
  - unzip elasticsearch-0.90.13.zip
  - elasticsearch-0.90.13/bin/elasticsearch


install:
  - "pip install -U pip wheel coveralls pep8 pylint"
  - "pip install -r test_requirements.txt"


script:
  - DJANGO_SETTINGS_MODULE=settings coverage run --source=search ./manage.py test
  - coverage report -m
  - pep8 --config=.pep8 search
  - pylint --rcfile=.pylintrc search --report=no

after_success: coveralls
